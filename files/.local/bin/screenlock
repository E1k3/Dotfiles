#!/bin/sh
pixelation=24
blur=4
if ! pgrep i3lock > /dev/null; then
	scrot -om /tmp/screen_locked.png

	ffmpeg -i /tmp/screen_locked.png -y -v error -vf "scale=w=iw/$pixelation:h=-1:flags=fast_bilinear,scale=w=iw*$pixelation:h=-1:flags=neighbor,boxblur=luma_radius=$blur:chroma_radius=$blur" /tmp/screen_blurred.png

	rm /tmp/screen_locked.png

	i3lock -i /tmp/screen_blurred.png
fi
